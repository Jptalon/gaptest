<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8">
  	<title>asd</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<meta name="apple-mobile-web-app-capable" content="yes">
  	<meta name="apple-mobile-web-app-status-bar-style" content="black">
  	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCuKnu1Z-ovjskSVe3DkvjO6uNavYEUHy0&sensor=true"></script>  
  	<link href="css/codiqa.ext.min.css" rel="stylesheet">
  	<script src="js/jquery-1.9.1.min.js"></script>
  	<script src="js/jquery.mobile-1.3.1.min.js"></script>
  	<link href="css/jquery.mobile-1.3.1.min.css" rel="stylesheet">	
  	<script src="js/codiqa.ext.min.js"></script>
  	<script src="cordova.js"></script>
  	<style>
		html{height:100%;}
		body{height:100%; margin:0; padding:0;}
		#map-canvas{height:50%;}
		#content {
			padding:0;
			position:absolute !important;
			top:40px !important;
			right:0;
			bottom:40px !important;
			left:0 !important;
            z-index:10;
		}
      #bottom {margin-top:65%;}
	</style>
    <script type="text/javascript">
    	$(document).on('pageinit', '#page1', function(e,data) { getPos(); });
    	var lat;
    	var lng;

    	function getPos(){ navigator.geolocation.getCurrentPosition(onSuccess, onError); }
    	
    	function initializeMap(lat,lng) {
    		//console.log('init: '+lat+':'+lng);
    		var myLatlng = new google.maps.LatLng(lat,lng);
    		var mapOptions = {
    			zoom:8,
    			center:myLatlng,
    			mapTypeId: google.maps.MapTypeId.ROADMAP
    		}
    		var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
    	}
    	
    	function onSuccess(position){
    		lat = position.coords.latitude;
    		lng = position.coords.longitude;
    		//console.log(lat+":"+lng);
    		initializeMap(lat,lng);
    	}

    	function onError(error){ 
    		alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
    	}
	</script>
</head>
<body>
	<div id="page1" data-role="page" data-theme="a">
		<div data-theme="a" data-role="header"> 
			<h3>MapIt</h3>
			<a data-rel="back">Back</a>
        </div>     
        <div data-role="content" id="content">   
			<div id="map-canvas"></div> 
        </div>
		<div id="bottom">
            <a href="#" class="add-markers" data-role="button" data-theme="a">Add Some More Markers</a>       
            <div data-controltype="textinput">
				<input name="" id="textinput2" placeholder="City and state" value="" type="text">
            </div>
            <input type="submit" value="Submit">
            <input type="submit" value="My Location">
		</div>     
    </div>
</body>
</html>
